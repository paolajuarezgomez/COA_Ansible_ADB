- name: copy config file
  become: true
  become_method: sudo
  become_user: root
  ansible.builtin.copy:
    src: ../vault/config
    dest: /root/.oci/config
    mode: u=rw
  register: client1
- name: Print copy config file
  ansible.builtin.debug:
    var: client1
- name: copy api key file
  become: true
  become_method: sudo
  become_user: root
  ansible.builtin.copy:
    src: ../vault/oci_api_key.pem
    dest: /root/.oci/oci_api_key.pem
    mode: u=rw
  register: client2
- name: Print copy config file
  ansible.builtin.debug:
    var: client2
- name: run backup
  become: true
  become_method: sudo
  become_user: root
  ansible.builtin.shell: oci db autonomous-database-backup create --display-name {{ display_name }} --autonomous-database-id {{ database_id }}
  register: client3
- name: Print copy config_Backup.sql
  ansible.builtin.debug:
    var: client3
- name: Ansible delete config file
  become: true
  become_method: sudo
  become_user: root
  file:
    path: /root/.oci/config
    state: absent
  register: client4
- name: Print delete config file
  ansible.builtin.debug:
    var: client4
- name: Ansible delete api file
  become: true
  become_method: sudo
  become_user: root
  file:
    path: /root/.oci/oci_api_key.pem
    state: absent
  register: client5
- name: Print delete api file
  ansible.builtin.debug:
    var: client5



